<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Админ-панель | Апелляции</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #2f2f2f;
      color: #fff;
      padding: 2rem;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #3a3a3a;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    h2, h3 {
      color: #f0f0f0;
    }
    input, select, button, textarea {
      font-family: monospace;
      font-size: 1rem;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border-radius: 5px;
      border: none;
    }
    input[type="password"] {
      width: 100%;
    }
    button {
      cursor: pointer;
      margin: 0.3rem;
    }
    .player-block {
      margin-top: 1rem;
      padding: 1rem;
      background: #444;
      border-radius: 8px;
    }
    .status {
      font-weight: bold;
    }
    .status-одобрено {
      background-color: #2e7d32;
      padding: 0.3rem 0.6rem;
      border-radius: 5px;
    }
    .status-отклонено {
      background-color: #b71c1c;
      padding: 0.3rem 0.6rem;
      border-radius: 5px;
    }
    .status-на_рассмотрении {
      background-color: #fbc02d;
      color: black;
      padding: 0.3rem 0.6rem;
      border-radius: 5px;
    }
    .status-пермач {
      background-color: #880e4f;
      padding: 0.3rem 0.6rem;
      border-radius: 5px;
    }
    #output {
      white-space: pre-wrap;
      background: #222;
      padding: 1rem;
      margin-top: 2rem;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Админ-панель: управление апелляциями</h2>
    <label for="adminPass">Пароль:</label>
    <input type="password" id="adminPass" placeholder="Введите пароль" />
    <button onclick="loadPanel()">Войти</button>

    <div id="panel" style="display:none">
      <div id="players"></div>
      <button onclick="generateJSON()">Сгенерировать JSON</button>
      <textarea id="output" rows="10" readonly></textarea>
    </div>
  </div>

  <script>
    const PASSWORD = "BVNt539greek7BV98";
    let players = {
      "PlayerOne": { status: "на рассмотрении", unban_at: null },
      "PlayerTwo": { status: "пермач", unban_at: null },
      "PlayerThree": { status: "одобрено", unban_at: "2025-05-25T16:00:00Z" },
    };

    function loadPanel() {
      const pass = document.getElementById("adminPass").value;
      if (pass !== PASSWORD) return alert("Неверный пароль");
      document.getElementById("panel").style.display = "block";
      renderPlayers();
    }

    function renderPlayers() {
      const container = document.getElementById("players");
      container.innerHTML = "";
      for (const [nick, data] of Object.entries(players)) {
        const div = document.createElement("div");
        div.className = "player-block";
        div.innerHTML = `
          <strong>${nick}</strong> — <span class="status status-${data.status.replaceAll(" ", "_")}">${data.status}</span><br>
          <label>Изменить статус: </label>
          <select onchange="updateStatus('${nick}', this.value)">
            <option value="">Выбрать действие</option>
            <option value="одобрено">Разбанить (одобрено)</option>
            <option value="отклонено">Отклонить апелляцию</option>
            <option value="пермач">Бессрочная блокировка</option>
            <option value="custom">Временный бан (ввести)</option>
            <option value="1">Бан на 1 день</option>
            <option value="3">Бан на 3 дня</option>
            <option value="7">Бан на 7 дней</option>
            <option value="14">Бан на 14 дней</option>
            <option value="30">Бан на 30 дней</option>
          </select>
          <div id="custom-${nick}" style="display:none">
            <input type="number" placeholder="Дни" onchange="setCustomBan('${nick}', this.value)" />
          </div>
        `;
        container.appendChild(div);
      }
    }

    function updateStatus(nick, value) {
      if (value === "custom") {
        document.getElementById(`custom-${nick}`).style.display = "block";
        return;
      }
      document.getElementById(`custom-${nick}`).style.display = "none";
      if (["одобрено", "отклонено", "пермач"].includes(value)) {
        players[nick].status = value;
        players[nick].unban_at = value === "одобрено" ? new Date().toISOString() : null;
      } else if (!isNaN(parseInt(value))) {
        const days = parseInt(value);
        players[nick].status = "временный бан";
        const unban = new Date();
        unban.setDate(unban.getDate() + days);
        players[nick].unban_at = unban.toISOString();
      }
      renderPlayers();
    }

    function setCustomBan(nick, days) {
      if (!days || isNaN(days)) return;
      const d = parseInt(days);
      const date = new Date();
      date.setDate(date.getDate() + d);
      players[nick].status = "временный бан";
      players[nick].unban_at = date.toISOString();
      renderPlayers();
    }

    function generateJSON() {
      document.getElementById("output").value = JSON.stringify(players, null, 2);
    }
  </script>
</body>
</html>
